"use client";

import Image from "next/image";
import Link from "next/link";
import { usePathname } from "next/navigation";

import {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarHeader,
  SidebarMenu,
  SidebarMenuItem,
  SidebarMenuButton,
} from "@/components/ui/sidebar";
import { useSidebar } from "@/components/ui/sidebar";

export function AppSidebar() {
  const pathname = usePathname();
  const { state } = useSidebar();
  const isActive = (url: string) => pathname.includes(url);

  const sidebarTopItems = [
    {
      title: "Metrics",
      url: "/metrics",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M11 5C11 4.44772 10.5523 4 10 4C9.44771 4 9 4.44772 9 5V15C9 15.5523 9.44771 16 10 16C10.5523 16 11 15.5523 11 15V5Z"
            fill="#3064F6"
          />
          <path
            d="M15 8C15 7.44772 14.5523 7 14 7C13.4477 7 13 7.44772 13 8V15C13 15.5523 13.4477 16 14 16C14.5523 16 15 15.5523 15 15V8Z"
            fill="#3064F6"
          />
          <path
            d="M7 11C7 10.4477 6.55228 10 6 10C5.44772 10 5 10.4477 5 11L5 15C5 15.5523 5.44772 16 6 16C6.55229 16 7 15.5523 7 15L7 11Z"
            fill="#3064F6"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0 3C0 1.34315 1.34315 0 3 0H17C18.6569 0 20 1.34315 20 3V17C20 18.6569 18.6569 20 17 20H3C1.34315 20 0 18.6569 0 17V3ZM3 2C2.44772 2 2 2.44772 2 3V17C2 17.5523 2.44772 18 3 18H17C17.5523 18 18 17.5523 18 17V3C18 2.44772 17.5523 2 17 2H3Z"
            fill="#3064F6"
          />
        </svg>
      ),
    },

    {
      title: "Data Room",
      url: "/data-room",
      icon: (
        <svg
          width="18"
          height="19"
          viewBox="0 0 18 19"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M4.5 3C4.08333 3 3.72917 3.14583 3.4375 3.4375C3.14583 3.72917 3 4.08333 3 4.5C3 4.91667 3.14583 5.27083 3.4375 5.5625C3.72917 5.85417 4.08333 6 4.5 6C4.91667 6 5.27083 5.85417 5.5625 5.5625C5.85417 5.27083 6 4.91667 6 4.5C6 4.08333 5.85417 3.72917 5.5625 3.4375C5.27083 3.14583 4.91667 3 4.5 3ZM4.5 13C4.08333 13 3.72917 13.1458 3.4375 13.4375C3.14583 13.7292 3 14.0833 3 14.5C3 14.9167 3.14583 15.2708 3.4375 15.5625C3.72917 15.8542 4.08333 16 4.5 16C4.91667 16 5.27083 15.8542 5.5625 15.5625C5.85417 15.2708 6 14.9167 6 14.5C6 14.0833 5.85417 13.7292 5.5625 13.4375C5.27083 13.1458 4.91667 13 4.5 13ZM1 0H17C17.2833 0 17.5208 0.0958333 17.7125 0.2875C17.9042 0.479167 18 0.716667 18 1V8C18 8.28333 17.9042 8.52083 17.7125 8.7125C17.5208 8.90417 17.2833 9 17 9H1C0.716667 9 0.479167 8.90417 0.2875 8.7125C0.0958333 8.52083 0 8.28333 0 8V1C0 0.716667 0.0958333 0.479167 0.2875 0.2875C0.479167 0.0958333 0.716667 0 1 0ZM2 2V7H16V2H2ZM1 10H17C17.2833 10 17.5208 10.0958 17.7125 10.2875C17.9042 10.4792 18 10.7167 18 11V18C18 18.2833 17.9042 18.5208 17.7125 18.7125C17.5208 18.9042 17.2833 19 17 19H1C0.716667 19 0.479167 18.9042 0.2875 18.7125C0.0958333 18.5208 0 18.2833 0 18V11C0 10.7167 0.0958333 10.4792 0.2875 10.2875C0.479167 10.0958 0.716667 10 1 10ZM2 12V17H16V12H2Z"
            fill="black"
          />
        </svg>
      ),
    },

    {
      title: "Investor Access",
      url: "/investor-access",
      icon: (
        <svg
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M9 0C9.55229 1.19209e-07 10 0.447715 10 1L10 10C10 10.5523 9.55228 11 9 11C8.44771 11 8 10.5523 8 10L8 1C8 0.447715 8.44772 -1.19209e-07 9 0ZM3 7.15256e-07C3.55229 7.7486e-07 4 0.447716 4 1L4 4H5C5.55229 4 6 4.44772 6 5C6 5.55229 5.55229 6 5 6L1 6C0.447715 6 0 5.55229 0 5C0 4.44772 0.447715 4 1 4H2L2 1C2 0.447716 2.44772 6.55651e-07 3 7.15256e-07ZM15 7.15256e-07C15.5523 7.7486e-07 16 0.447716 16 1L16 7H17C17.5523 7 18 7.44772 18 8C18 8.55229 17.5523 9 17 9L13 9C12.4477 9 12 8.55229 12 8C12 7.44772 12.4477 7 13 7H14L14 1C14 0.447716 14.4477 5.96046e-07 15 7.15256e-07ZM3 7C3.55228 7 4 7.44772 4 8L4 17C4 17.5523 3.55228 18 3 18C2.44771 18 2 17.5523 2 17L2 8C2 7.44772 2.44772 7 3 7ZM15 10C15.5523 10 16 10.4477 16 11L16 17C16 17.5523 15.5523 18 15 18C14.4477 18 14 17.5523 14 17L14 11C14 10.4477 14.4477 10 15 10ZM6 13C6 12.4477 6.44771 12 7 12H11C11.5523 12 12 12.4477 12 13C12 13.5523 11.5523 14 11 14H10L10 17C10 17.5523 9.55228 18 9 18C8.44771 18 8 17.5523 8 17L8 14H7C6.44771 14 6 13.5523 6 13Z"
            fill="black"
          />
        </svg>
      ),
    },
  ];

  const sidebarBottomItems = [
    {
      title: "Settings",
      url: "/settings",
      icon: (
        <svg
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M10 6C7.79086 6 6 7.79086 6 10C6 12.2091 7.79086 14 10 14C12.2091 14 14 12.2091 14 10C14 7.79086 12.2091 6 10 6ZM8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10C12 11.1046 11.1046 12 10 12C8.89543 12 8 11.1046 8 10Z"
            fill="#757575"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M7.00002 2C7.00002 0.895432 7.89545 0 9.00002 0H11C12.1046 0 13 0.895431 13 2V2.5818C13.0416 2.59861 13.0829 2.61576 13.1241 2.63325C13.1728 2.58454 13.2211 2.5352 13.2693 2.48582C13.3788 2.37383 13.4885 2.26167 13.604 2.15643C14.3889 1.4414 15.6054 1.46319 16.364 2.2218L17.7782 3.63602C18.5592 4.41706 18.5592 5.68339 17.7782 6.46444L17.3668 6.87588C17.3842 6.91707 17.4014 6.95845 17.4182 7H18C19.1046 7 20 7.89543 20 9V11C20 12.1046 19.1046 13 18 13H17.4182C17.4014 13.0416 17.3842 13.0829 17.3668 13.1241L17.7782 13.5356C18.5592 14.3166 18.5592 15.5829 17.7782 16.364L16.364 17.7782C15.5829 18.5592 14.3166 18.5592 13.5355 17.7782L13.1241 17.3668C13.0829 17.3842 13.0416 17.4014 13 17.4182V18C13 19.1046 12.1046 20 11 20H9.00002C7.89545 20 7.00002 19.1046 7.00002 18V17.4182C6.95847 17.4014 6.91709 17.3842 6.87589 17.3667L6.46447 17.7782C5.68342 18.5592 4.41709 18.5592 3.63604 17.7782L2.22183 16.3639C1.44078 15.5829 1.44078 14.3166 2.22183 13.5355L2.63326 13.1241C2.61578 13.0829 2.59863 13.0415 2.58182 13H2C0.895432 13 0 12.1046 0 11V9C0 7.89543 0.895431 7 2 7H2.58182C2.59863 6.95846 2.61578 6.9171 2.63326 6.87592L2.22183 6.46449C1.44079 5.68344 1.44078 4.41711 2.22183 3.63606L3.63605 2.22185C4.4171 1.4408 5.68343 1.4408 6.46448 2.22185L6.8759 2.63327C6.91709 2.61578 6.95847 2.59862 7.00002 2.5818V2ZM9.00002 2L11 2V3.28988C11 3.7323 11.2907 4.12213 11.7148 4.24833C12.1132 4.36691 12.4944 4.52587 12.8538 4.72058C13.2429 4.93144 13.7243 4.86143 14.0373 4.54847L14.9498 3.63602L16.364 5.05023L15.4515 5.96268C15.1386 6.27564 15.0686 6.75709 15.2794 7.14622C15.4741 7.50556 15.6331 7.8868 15.7517 8.28525C15.8779 8.70929 16.2677 9 16.7101 9H18V11H16.7101C16.2677 11 15.8779 11.2907 15.7517 11.7148C15.6331 12.1132 15.4741 12.4944 15.2794 12.8538C15.0686 13.2429 15.1386 13.7244 15.4515 14.0373L16.364 14.9498L14.9498 16.364L14.0373 15.4515C13.7243 15.1386 13.2429 15.0686 12.8538 15.2794C12.4944 15.4741 12.1132 15.6331 11.7148 15.7517C11.2907 15.8779 11 16.2677 11 16.7101V18H9.00002V16.7101C9.00002 16.2677 8.7093 15.8779 8.28527 15.7517C7.88681 15.6331 7.50557 15.4741 7.14623 15.2794C6.7571 15.0685 6.27565 15.1385 5.96269 15.4515L5.05026 16.3639L3.63604 14.9497L4.54849 14.0373C4.86144 13.7243 4.93146 13.2429 4.7206 12.8537C4.52589 12.4944 4.36693 12.1132 4.24835 11.7148C4.12215 11.2907 3.73231 11 3.28989 11H2V9H3.28989C3.73231 9 4.12215 8.70929 4.24835 8.28525C4.36693 7.88681 4.52589 7.50558 4.7206 7.14625C4.93146 6.75712 4.86145 6.27567 4.54849 5.96272L3.63605 5.05027L5.05026 3.63606L5.9627 4.5485C6.27565 4.86145 6.75711 4.93146 7.14623 4.7206C7.50557 4.52588 7.88681 4.36692 8.28527 4.24833C8.7093 4.12213 9.00002 3.7323 9.00002 3.28988V2Z"
            fill="#757575"
          />
        </svg>
      ),
    },

    {
      title: "Logout",
      url: "/auth/logout",
      icon: (
        <svg
          width="20"
          height="18"
          viewBox="0 0 20 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M19.7071 8.29289C20.0976 8.68342 20.0976 9.31658 19.7071 9.70711L16.7071 12.7071C16.3166 13.0976 15.6834 13.0976 15.2929 12.7071C14.9024 12.3166 14.9024 11.6834 15.2929 11.2929L16.5858 10L5 10C4.44771 10 4 9.55229 4 9C4 8.44772 4.44771 8 5 8L16.5858 8L15.2929 6.70711C14.9024 6.31658 14.9024 5.68342 15.2929 5.29289C15.6834 4.90237 16.3166 4.90237 16.7071 5.29289L19.7071 8.29289ZM10 3C10 2.44772 9.55228 2 9 2H3C2.44772 2 2 2.44772 2 3V15C2 15.5523 2.44772 16 3 16H9C9.55228 16 10 15.5523 10 15L10 13C10 12.4477 10.4477 12 11 12C11.5523 12 12 12.4477 12 13V15C12 16.6569 10.6569 18 9 18H3C1.34315 18 0 16.6569 0 15V3C0 1.34315 1.34315 0 3 0L9 0C10.6569 0 12 1.34315 12 3V5C12 5.55228 11.5523 6 11 6C10.4477 6 10 5.55228 10 5V3Z"
            fill="#757575"
          />
        </svg>
      ),
    },
  ];
  return (
    <Sidebar collapsible="icon">
      <SidebarHeader>
        <div className="flex items-center justify-between p-2">
          <div className=" w-[120px]">
            {state === "expanded" ? (
              <Image src="/svgs/logo.svg" alt="Logo" width={120.84} height={20} priority />
            ) : (
              <Image src="/svgs/logo-small.svg" alt="Logo" width={100} height={100} priority />
            )}
          </div>
        </div>
      </SidebarHeader>
      <SidebarContent className="flex flex-col h-full">
        <SidebarGroup className="flex-1">
          <SidebarMenu>
            {sidebarTopItems.map((item) => (
              <SidebarMenuItem key={item.url} className="h-[52px]">
                <Link href={item.url} className="w-full">
                  <SidebarMenuButton
                    tooltip={item.title}
                    className={`${
                      isActive(item.url)
                        ? "bg-[#EFF4FF] text-[#3064F6]"
                        : "hover:bg-[#EFF4FF] hover:text-[#3064F6]"
                    } w-full h-full cursor-pointer`}
                  >
                    <div
                      className={`${
                        isActive(item.url)
                          ? "[&>svg>path]:fill-[#3064F6]"
                          : "[&>svg>path]:fill-black hover:[&>svg>path]:fill-[#3064F6]"
                      }`}
                    >
                      {item.icon}
                    </div>
                    <span>{item.title}</span>
                  </SidebarMenuButton>
                </Link>
              </SidebarMenuItem>
            ))}
          </SidebarMenu>
        </SidebarGroup>
        <SidebarGroup className="mt-auto">
          <SidebarMenu>
            {sidebarBottomItems.map((item) => (
              <SidebarMenuItem key={item.url} className="h-[52px]">
                <Link href={item.url} className="w-full">
                  <SidebarMenuButton
                    tooltip={item.title}
                    className={`${
                      isActive(item.url)
                        ? "bg-[#EFF4FF] text-[#3064F6]"
                        : "hover:bg-[#EFF4FF] hover:text-[#3064F6]"
                    } w-full h-full cursor-pointer`}
                  >
                    <div
                      className={`${
                        isActive(item.url)
                          ? "[&>svg>path]:fill-[#3064F6]"
                          : "[&>svg>path]:fill-black hover:[&>svg>path]:fill-[#3064F6]"
                      }`}
                    >
                      {item.icon}
                    </div>
                    <span>{item.title}</span>
                  </SidebarMenuButton>
                </Link>
              </SidebarMenuItem>
            ))}
          </SidebarMenu>
        </SidebarGroup>
      </SidebarContent>
      <SidebarFooter />
    </Sidebar>
  );
}
